@addTagHelper "*, Microsoft.AspNetCore.Mvc.TagHelpers"
@model ExpenseApp.ViewModels.ExpenseCreateViewModel
@{
  Layout = "_Layout";
}

@section Title { New Expense Form }

@section Header {
  <h1>Skill-Up Expense Report</h1>
}

@section Scripts {
  <script src="~/scripts/form.js"
          type="text/javascript"
          defer></script>
}

<form asp-action="Create">

  @Html.AntiForgeryToken()

  <div class="input-validation-error grid-item"
       asp-validation-summary="All"></div>

  <div class="grid-container">
    <!-- Title -->
    <div class="input-container grid-item">
      <label class="label"
             asp-for="Form.Title"></label>
      <input class="input-field"
             type="text"
             asp-for="Form.Title" />
      <span class="error-label"
            asp-validation-for="Form.Title"></span>
    </div>

    <!-- Purpose -->
    <div class="input-container grid-item">
      <label class="label"
             asp-for="Form.Purpose"></label>
      <input class="input-field"
             type="text"
             asp-for="Form.Purpose" />
      <span class="error-label"
            asp-validation-for="Form.Purpose"></span>
    </div>

    <!-- Statement Number -->
    <div class="input-container grid-item">
      <label class="label"
             asp-for="Form.StatementNumber"></label>
      <input id="statement-number-field"
             class="input-field"
             type="text"
             asp-for="Form.StatementNumber"
             readonly />
    </div>

    <!-- Period -->
    <div class="input-container grid-item">
      <div class="grid-container">
        <div class="input-container grid-item">
          <label class="label"
                 asp-for="Form.From"></label>
          <input id="from-field"
                 class="input-field"
                 type="date"
                 asp-for="Form.From" />
          <span class="error-label"
                asp-validation-for="Form.From"></span>
        </div>

        <div class="input-container grid-item">
          <label class="label"
                 asp-for="Form.To"></label>
          <input class="input-field"
                 type="date"
                 asp-for="Form.To" />
          <span class="error-label"
                asp-validation-for="Form.To"></span>
        </div>
      </div>
    </div>
  </div>
  <h2>Consultant Information</h2>

  <div class="grid-container">
    <!-- Name -->
    <div class="input-container grid-item">
      <label class="label"
             asp-for="Form.Employee.FullName">Name</label>
      <input type="text"
             asp-for="Form.Employee.FullName"
             class="input-field"
             readonly />
    </div>

    <!-- Project -->
    <div class="input-container grid-item">
      <label class="label"
             asp-for="Form.Project"></label>
      <input id="project-field"
             type="text"
             asp-for="Form.Project"
             class="input-field"
             placeholder="CLIENT-PROJECT" />
      <span asp-validation-for="Form.Project"
            class="error-label"></span>
    </div>

    <!-- Location -->
    <div class="input-container grid-item">
      <label class="label"
             asp-for="Form.Employee.Location.Name"></label>
      <input type="text"
             asp-for="Form.Employee.Location.Name"
             class="input-field"
             readonly />
    </div>

    <!-- Approver -->
    <div class="input-container grid-item">
      <label class="label"
             asp-for="Form.Employee.Approver.FullName"></label>
      <input type="text"
             asp-for="Form.Employee.Approver.FullName"
             class="input-field"
             readonly />
    </div>
  </div>

  <h2>All Expense Claims</h2>

  <!-- Expense Claim Table -->
  <table id="expense-entry-table"
         class="table">
    <thead>
      <tr>
        <th>Date</th>
        <th>Account</th>
        <th>Description</th>
        <th>Hotel</th>
        <th>Transport</th>
        <th>Fuel</th>
        <th>Meals</th>
        <th>Phone</th>
        <th>Ent.</th>
        <th>Misc.</th>
        <th>Total</th>
        <th>Receipt</th>
      </tr>
    </thead>
    <tbody>
      @foreach (var entry in Model.Form.Entries)
      {
        <tr>
          <td>@entry.Date.ToShortDateString()</td>
          <td>@entry.Account.Name</td>
          <td>@entry.Description</td>
          <td>@entry.Hotel</td>
          <td>@entry.Transport</td>
          <td>@entry.Fuel</td>
          <td>@entry.Meals</td>
          <td>@entry.Phone</td>
          <td>@entry.Entertainment</td>
          <td>@entry.Misc</td>
          <td>@entry.Total</td>
          <td>
            <input type="checkbox"
                   checked="@(entry.ReceiptId != null)"
                   disabled>
          </td>
        </tr>
      }
      @if (Model.Form.Entries.Count() == 0)
      {
        <tr>
          <td colspan="12">
            <div class="empty-list-label">There are no Expense Entries.</div>
          </td>
        </tr>
      }
    </tbody>
  </table>

  <!-- Comment -->
  <div class="textarea-container">
    <label class="label"
           asp-for="Form.Comment"></label>
    <textarea class="input-field textarea-field multiline"
              asp-for="Form.Comment"></textarea>
    <span asp-validation-for="Form.Comment"
          class="error-label"></span>
  </div>

  <div class="button-group">
    <a class="button-cancel"
       href="@Url.Action("Index", "Form")">Cancel</a>
    <button class="button-secondary">Save</button>
    <button class="button-primary"
            type="submit">
      Submit
    </button>
  </div>

</form>